{{!-- line height, settings stored in localstorage, rem is reletive to the html tag, where em is reletive to the parent --}}



{{> nav}}
<main class="main_settings">
	{{> header}}

	<section class="container">
{{> settingsnav}}
		<div class="settings_container">
            <h2>Accessibility settings</h2>
			<section class="accessibilitySection_wrapper">
                <h4>Color mode</h4>
                <div class="btn_container">
                    <div class="colorMode_btn">
                        <span>System</span>
                    </div>
                    <div class="colorMode_btn">
                        <span>Light</span>
                    </div>
                    <div class="colorMode_btn">
                        <span>Dark</span>
                    </div>
                </div>
            </section>

            <section class="accessibilitySection_wrapper">
                <h4>Font</h4>
                <div class="btn_container">
                    <div class="fontFamilyMode_btn" onclick="defaultMode()">
                        <span>Default</span>
                    </div>
                    <div class="fontFamilyMode_btn" onclick="dyslexicMode()">
                        <span>Dyslexic</span>
                    </div>
                </div>
            </section>

            <section class="accessibilitySection_wrapper">
                <h4>Font size</h4>
                <div class="btn_container">
                    <div class="fontSizeMode_btn" onclick="fontSizeChange(this)">
                        <span>Small</span>
                    </div>
                    <div class="fontSizeMode_btn" onclick="fontSizeChange(this)">
                        <span>Default</span>
                    </div>
                    <div class="fontSizeMode_btn" onclick="fontSizeChange(this)">
                        <span>Large</span>
                    </div>
                </div>
            </section>

		</div>
	</section>

</main>

<script>
    function ChangeFontSize() {
        if(localStorage.getItem("fontSize")) {
            let fontSize = localStorage.getItem("fontSize");
            let lineHeight = localStorage.getItem("lineHeight");
            document.querySelectorAll("li, a, p, span").forEach((element) => {
            if (element.tagName === "SPAN" || element.tagName === "P") {
                element.style.fontSize = fontSize;
                element.style.lineHeight = lineHeight;
            }
            });
        }
    }
</script>
{{!--
lav en samlet dyslexia pakke
+ posentielt adv hvor man så kan ændre individuelle --}}
<script>
    function fontSizeChange(font) {
        let textContent = font.querySelector("span").textContent.toLowerCase();
        if(!textContent || textContent == "default") {
            textContent = "unset";
        }
        localStorage.setItem("fontSize", textContent)
        
        if(textContent == "small")
            localStorage.setItem("lineHeight", 1.4);
        if(textContent == "unset")
            localStorage.setItem("lineHeight", 1.5);
        if(textContent == "large") 
            localStorage.setItem("lineHeight", 1.6);

        ChangeFontSize()
    }


    let body = document.querySelector("body");
    function dyslexicMode() {
        localStorage.setItem("dyslexia", true)

        if(!body.classList.contains("dyslexia_mode"))
            body.classList.add("dyslexia_mode");
    }
    function defaultMode() {
        localStorage.setItem("dyslexia", false);
        if(body.classList.contains("dyslexia_mode"))
            body.classList.remove("dyslexia_mode");
    }
</script>